
name: Test.run

on:
  workflow_call:

jobs:
  testrun:
    name: Test Running
    runs-on: windows-2022
    
    steps:        
      - name: Checkout
        uses: actions/checkout@v3
      - name: Make download folder
        shell: bash
        run: mkdir artifacts
      - name: Download artifacts
        uses: actions/download-artifact@v3
        with:
          name: Test
          path: .\Test\
      - name: vstest-action
        uses: microsoft/vstest-action@v1.0.0
        with:
          testAssembly: "Test\\Up2dateTests.dll"
      - name: trx-parser
  # You may pin to the exact commit or the version.
  # uses: NasAmin/trx-parser@2ba59ca11c1060572e96540966b730b779e0bdd0
        uses: NasAmin/trx-parser@v0.2.0
        with:
          TRX_PATH: TestResults\*.trx
          REPO_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          

